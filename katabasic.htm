<html>

<head>

<meta charset="utf-8"/>
		
<style type="text/css">
body{background-color: #f0f0f0; color: #303030; text-transform: uppercase; text-align: center; transition: all 0.5s}
body.green{color: #6ecf27}
body.red{color: #f41c27}
.tails{display:none !important}
</style>
</head>

<body>
<div id="kanj" style="margin-top: 7vw; font-size:17vw; letter-spacing: -2.1vw">カタテスト</div>
<div id="yomi"></div>
<div id="draw" style="min-height:1.3vw">ＫＡＴＡＴＥＳＴ　ＢＡＳＩＣ</div>
<div id="0" style="font-size:4.3vw; display:inline-block; padding:7%">⇦⇨ 選ぶ</div>
<div id="1" style="font-size:4.3vw; display:inline-block; padding:7%">⇨ アドバンス</div>
<div id="accuracy"></div>

<script>function shuffle(array) {
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;}}


function setit(){if (chosen != 0 && i<w.length){
document.addEventListener('keydown', function(event){

var pressed = event.key; 
if (pressed === 'ArrowRight' && chosen != 0) {

document.body.className = '';
document.getElementById('0').className = '';
document.getElementById('1').className = '';
document.getElementById('draw').textContent = '';
console.log('Styles stripped');
	
tails=[0,1];
current = w[i];

document.getElementById('kanj').textContent = kanj[current];
shuffle(tails); 
document.getElementById(tails[0]).textContent = desu[current];
document.getElementById(tails[1]).textContent = janai[current]; console.log('Styles for step '+i+' are set'); kickit()
}});}

}

		
function kickit(){chosen = 0;

if(i==w.length){document.getElementById('0').textContent = '確度'; 
document.getElementById('1').textContent = 'accuracy';
document.getElementById('kanj').textContent = (parseFloat(right/w.length*100).toFixed(2))+'%'}

if (chosen == 0 && i<w.length) {
	
	console.log('i='+i); var i2=i;
	
	if (desu[current] == janai[current]){
	document.body.className = 'green'; chosen = 1; 
	document.getElementById('draw').textContent = "ｌｕｃｋｙ　ｄｒａｗ";
	right++; i++; setit();}else{
	
	var listener = function(event){
		var pressed2 = event.key; 
	
		if (pressed2 === 'ArrowLeft' && tails[0] == 0 && chosen != 1) {
		document.body.className = 'green'; right++;
		document.getElementById('1').className = 'tails';
		i++; console.log('i='+i+' i2='+i2); document.removeEventListener('keydown', listener); if (i>i2) {chosen=1; console.log('is chosen '+chosen);}; }
		
		if (pressed2 === 'ArrowLeft' && tails[0] == 1 && chosen != 1) {
		document.body.className = 'red';  
		document.getElementById('0').className = 'tails';
		i++; console.log('i='+i+' i2='+i2); document.removeEventListener('keydown', listener); if (i>i2) {chosen=1; console.log('is chosen '+chosen);}; }
		
		if (pressed2 === 'ArrowRight' && tails[0] == 0 && chosen != 1) {
		document.body.className = 'red'; 
		document.getElementById('1').className = 'tails';
		i++; console.log('i='+i+' i2='+i2); document.removeEventListener('keydown', listener); if (i>i2) {chosen=1; console.log('is chosen '+chosen);}; }
		
		if (pressed2 === 'ArrowRight' && tails[0] == 1 && chosen != 1) {
		document.body.className = 'green'; right++;
		document.getElementById('0').className = 'tails';
		i++; console.log('i='+i+' i2='+i2); document.removeEventListener('keydown', listener); if (i>i2) {chosen=1; console.log('is chosen '+chosen);}; }}

	document.addEventListener('keydown', listener);
	}; 
	
	}
	
	
	
	setit();}

var kanj=['ア','イ','ウ','エ','オ',
'カ','キ','ク','ケ','コ',
'サ','シ','ス','セ','ソ',
'タ','チ','ツ','テ','ト',
'ナ','ニ','ヌ','ネ','ノ',
'ハ','ヒ','フ','ヘ','ホ',
'マ','ミ','ム','メ','モ',
'ヤ','ユ','ヨ',
'ラ','リ','ル','レ','ロ',
'ワ','ヲ','ン'];
var desu=['ａ','ｉ','ｕ','ｅ','ｏ',
'ｋａ','ｋｉ','ｋｕ','ｋｅ','ｋｏ',
'ｓａ','ｓｈｉ','ｓｕ','ｓｅ','ｓｏ',
'ｔａ','ｃｈｉ','ｔｓｕ','ｔｅ','ｔｏ',
'ｎａ','ｎｉ','ｎｕ','ｎｅ','ｎｏ',
'ｈａ','ｈｉ','ｆｕ','ｈｅ','ｈｏ',
'ｍａ','ｍｉ','ｍｕ','ｍｅ','ｍｏ',
'ｙａ','ｙｕ','ｙｏ',
'ｒａ','ｒｉ','ｒｕ','ｒｅ','ｒｏ',
'ｗａ','（ｗ）ｏ','ｎ']; 
var janai=['ａ','ｉ','ｕ','ｅ','ｏ',
'ｋａ','ｋｉ','ｋｕ','ｋｅ','ｋｏ',
'ｓａ','ｓｈｉ','ｓｕ','ｓｅ','ｓｏ',
'ｔａ','ｃｈｉ','ｔｓｕ','ｔｅ','ｔｏ',
'ｎａ','ｎｉ','ｎｕ','ｎｅ','ｎｏ',
'ｈａ','ｈｉ','ｆｕ','ｈｅ','ｈｏ',
'ｍａ','ｍｉ','ｍｕ','ｍｅ','ｍｏ',
'ｙａ','ｙｕ','ｙｏ',
'ｒａ','ｒｉ','ｒｕ','ｒｅ','ｒｏ',
'ｗａ','（ｗ）ｏ','ｎ']; shuffle(janai);
var w=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]; shuffle(w); var i = 0; var tumblr = -1; var right = 0; var chosen = 1; var current; var tails=[0,1];

setit();
	
</script>
</body>

</html>

